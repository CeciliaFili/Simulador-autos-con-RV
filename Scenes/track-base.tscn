[gd_scene load_steps=9 format=2]

[ext_resource path="res://Assets/Textures/TexturesCom_Roads0069_1_seamless_S.jpg" type="Texture" id=1]
[ext_resource path="res://Assets/Textures/TexturesCom_RockGrassy0142_2_seamless_S.jpg" type="Texture" id=2]
[ext_resource path="res://Scripts/track-base.gd" type="Script" id=3]


[sub_resource type="Curve3D" id=1]
_data = {
"points": PoolVector3Array( 0, 0, 0, 0, 0, 0, -64.1225, -0.652832, 14.7594, 0, 0, 0, 0, 0, 0, -63.2516, -0.347612, 8.47241, 0, 0, 0, 0, 0, 0, -61.8798, -0.264953, -0.95557, 0, 0, 0, 0, 0, 0, -60.5475, 0.167826, -8.92515, 0, 0, 0, 0, 0, 0, -58.2218, 0.258694, -14.7154, 0, 0, 0, 0, 0, 0, -53.6738, 0.0330491, -18.748, 0, 0, 0, 0, 0, 0, -48.2663, 0.629394, -20.6473, 0, 0, 0, 0, 0, 0, -41.9221, 0.567871, -20.8106, 0, 0, 0, 0, 0, 0, -30.5455, 0.469718, -20.4394, 0, 0, 0, 0, 0, 0, -22.1846, 0.457555, -19.7749, 0, 0, 0, 0, 0, 0, -14.3254, 0.441597, -19.0265, 0, 0, 0, 0, 0, 0, -2.87117, 0.428492, -18.3636, 0, 0, 0, 0, 0, 0, 6.53478, 0.410598, -17.616, 0, 0, 0, 0, 0, 0, 16.3181, 0.346528, -14.6118, 0, 0, 0, 0, 0, 0, 21.493, 0.273926, -12.0908, 0, 0, 0, 0, 0, 0, 26.3574, -0.132812, -7.17301, 0, 0, 0, 0, 0, 0, 27.9874, 0.06652, -1.871, 0, 0, 0, 0, 0, 0, 28.7282, -0.283203, 8.30342, 0, 0, 0, 0, 0, 0, 28.5837, -0.392031, 17.0782, 0, 0, 0, 0, 0, 0, 25.6004, -0.86914, 31.7374, 0, 0, 0, 0, 0, 0, 21.6576, -0.998987, 46.6114, 0, 0, 0, 0, 0, 0, 19.6748, -0.71978, 52.9716, 0, 0, 0, 0, 0, 0, 16.1039, -1.01886, 59.2936, 0, 0, 0, 0, 0, 0, 12.4736, -1.12045, 63.9794, 0, 0, 0, 0, 0, 0, 7.81469, -0.608398, 68.4349, 0, 0, 0, 0, 0, 0, 1.62127, -1.43064, 70.7641, 0, 0, 0, 0, 0, 0, -5.46716, -1.55127, 69.3597, 0, 0, 0, 0, 0, 0, -9.38159, -2.05395, 64.3332, 0, 0, 0, 0, 0, 0, -8.84118, -2.09741, 57.1832, 0, 0, 0, 0, 0, 0, -3.21194, -0.861497, 39.7331, 0, 0, 0, 0, 0, 0, -1.32365, -0.851258, 31.5782, 0, 0, 0, 0, 0, 0, -0.868984, -0.691371, 24.3031, 0, 0, 0, 0, 0, 0, -1.38029, -0.674754, 19.7106, 0, 0, 0, 0, 0, 0, -3.70538, -0.587401, 15.6388, 0, 0, 0, 0, 0, 0, -7.99834, -0.0922079, 11.9518, 0, 0, 0, 0, 0, 0, -13.3492, -0.196576, 10.4575, 0, 0, 0, 0, 0, 0, -18.3095, -0.13446, 11.7444, 0, 0, 0, 0, 0, 0, -25.6476, -0.69351, 15.8951, 0, 0, 0, 0, 0, 0, -33.9367, -0.594238, 22.6071, 0, 0, 0, 0, 0, 0, -40.6095, -0.902343, 30.1445, 0, 0, 0, 0, 0, 0, -44.827, -0.773437, 34.0532, 0, 0, 0, 0, 0, 0, -49.368, -1.19416, 38.1626, 0, 0, 0, 0, 0, 0, -54.8299, -0.803222, 38.0884, 0, 0, 0, 0, 0, 0, -59.4407, -0.379883, 36.7369, 0, 0, 0, 0, 0, 0, -63.8206, -0.946311, 33.7841, 0, 0, 0, 0, 0, 0, -65.1866, -0.713603, 27.4529, 0, 0, 0, 0, 0, 0, -64.1225, -0.652832, 14.7594 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 )
}

[sub_resource type="Shader" id=2]
code = "shader_type spatial;
uniform sampler2D road_texture;
void fragment()
{
	vec2 road_uv = vec2(UV.y,UV.x);
	vec4 color = texture(road_texture,road_uv);
	ALBEDO = color.rgb;
	METALLIC = 0.0;
	ROUGHNESS = 0.8;	
}"

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 2 )
shader_param/road_texture = ExtResource( 1 )

[sub_resource type="Shader" id=4]
code = "shader_type spatial;
uniform sampler2D terrain_texture : hint_albedo;
varying vec2 terrain_uv;
void vertex(){
	terrain_uv = (WORLD_MATRIX*vec4(VERTEX,1.0)).xz*vec2(0.1,0.1);
}
void fragment(){
	vec4 color = texture(terrain_texture,terrain_uv);
	ALBEDO = color.rgb;
	METALLIC = 0.0;
	ROUGHNESS = 0.8;
}"

[sub_resource type="ShaderMaterial" id=5]
shader = SubResource( 4 )
shader_param/terrain_texture = ExtResource( 2 )

[node name="Path" type="Path"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0 )
curve = SubResource( 1 )
script = ExtResource( 3 )

[node name="Road" type="CSGPolygon" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 1.67638e-08, 0, -1.67638e-08, 1, 0, 0, 0 )
invert_faces = true
polygon = PoolVector2Array( -4, 0, -4, -0.1, 4, -0.1, 4, 0 )
mode = 2
path_node = NodePath("..")
path_interval = 1.0
path_rotation = 2
path_local = false
path_continuous_u = false
path_joined = true
material = SubResource( 3 )

[node name="Collisionshape" type="CSGPolygon" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 7.45058e-09, 0, -7.45058e-09, 1, 0, 0, 0 )
visible = false
use_collision = true
invert_faces = true
polygon = PoolVector2Array( -6, 0, 5, 0, 4, 6, 4, 6, 6, -6, -8, -1, -10, 8, -8, 0 )
mode = 2
path_node = NodePath("..")
path_interval = 1.0
path_rotation = 2
path_local = false
path_continuous_u = false
path_joined = true
smooth_faces = true

[node name="Ground" type="CSGPolygon" parent="."]
transform = Transform( 0.999999, 2.44472e-09, -1.11759e-07, -1.74623e-09, 1, 2.42144e-08, -2.23517e-08, 0, 0.999999, 0, 0, 0 )
invert_faces = true
polygon = PoolVector2Array( -6, -0.1, 6, -0.1, 12, -4.01, 12.1, -4.1, -12.1, -4.1, -12, -4 )
mode = 2
path_node = NodePath("..")
path_interval = 1.0
path_rotation = 2
path_local = false
path_continuous_u = false
path_joined = true
material = SubResource( 5 )
[connection signal="curve_changed" from="." to="." method="_on_Path_curve_changed"]
